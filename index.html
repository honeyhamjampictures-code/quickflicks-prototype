<!DOCTYPE html>
<html>
<head>
  <title>Mini ReelShort Web App (YouTube Version)</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 500px; margin: auto; }
    .episode { padding: 10px; border: 1px solid #ccc; margin-bottom: 8px; cursor: pointer; }
    .locked { background: #eee; color: #777; cursor: not-allowed; }
    #adPlayer { width: 100%; height: auto; display: none; margin-top: 20px; }
    #ytPlayer { width: 100%; height: 280px; display: none; margin-top: 20px; border: none; }
    #paywall { padding: 20px; border: 1px solid #aaa; margin-top: 20px; display: none; }
  </style>
</head>
<body>

<h2>Series Title</h2>
<p>Episodes 1â€“3 are free. Episodes 4+ require purchase.</p>

<div id="episodes"></div>

<!-- Pre-roll ad player -->
<video id="adPlayer" controls></video>

<!-- YouTube episode player -->
<iframe id="ytPlayer" allowfullscreen></iframe>

<div id="paywall">
  <h3>Unlock All Episodes</h3>
  <p>Get full access to all remaining episodes.</p>
  <a href="YOUR_PAYPAL_LINK_HERE" target="_blank">
    <button style="padding:10px 20px;">Unlock Season</button>
  </a>
</div>

<script>
// Episode list: replace VIDEO_ID with your unlisted YouTube IDs
const episodes = [
  { title: "aKk1p0EiWXs", yt: "VIDEO_ID_1", free: true },
  { title: "CuK_NZ01u-I", yt: "VIDEO_ID_2", free: true },
  { title: "Episode 3", yt: "VIDEO_ID_3", free: true },
  { title: "Episode 4", yt: "VIDEO_ID_4", free: false },
  { title: "Episode 5", yt: "VIDEO_ID_5", free: false },
];

// Your 10-second ad video (MP4 you host anywhere)
const adUrl = "videos/ad10sec.mp4";

const episodesDiv = document.getElementById("episodes");
const adPlayer = document.getElementById("adPlayer");
const ytPlayer = document.getElementById("ytPlayer");
const paywall = document.getElementById("paywall");

// Render episode list
episodes.forEach((ep, i) => {
  const div = document.createElement("div");
  div.className = "episode" + (ep.free ? "" : " locked");
  div.innerText = ep.title;

  div.onclick = () => {
    if (ep.free) {
      playWithAd(ep.yt);
    } else {
      // Show paywall
      paywall.style.display = "block";
      adPlayer.style.display = "none";
      ytPlayer.style.display = "none";
    }
  };

  episodesDiv.appendChild(div);
});

// Play pre-roll ad then the YouTube episode
function playWithAd(ytId) {
  paywall.style.display = "none";

  // Show video player
  adPlayer.style.display = "block";
  ytPlayer.style.display = "none";

  adPlayer.src = adUrl;
  adPlayer.play();

  // When ad finishes, load YouTube iframe
  adPlayer.onended = () => {
    adPlayer.style.display = "none";
    ytPlayer.style.display = "block";
    ytPlayer.src = "https://www.youtube.com/embed/" + ytId + "?autoplay=1&rel=0";
  };
}
</script>

</body>
</html>
