<!DOCTYPE html>
<html>
<head>
  <title>ReelShorts-Style Carousel Prototype</title>
  <style>
    body { margin:0; font-family: Arial; overflow-x:hidden; background:black; color:white;}
    #carousel { display:flex; overflow-x:auto; scroll-snap-type:x mandatory; height:100vh; }
    .episode-container {
      min-width: 100%;
      height: 100vh;
      scroll-snap-align:start;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      background:black;
    }
    iframe { width: 100%; height: 100%; border: none; }
    .locked { display:flex; justify-content:center; align-items:center; font-size:28px; cursor:pointer; text-align:center; padding:20px; }
    #overlay {
      position:absolute; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.6); color:#fff; display:flex;
      justify-content:center; align-items:center; font-size:24px; cursor:pointer; z-index:2;
    }
    #paywall {
      position: fixed; top:50%; left:50%;
      transform: translate(-50%, -50%);
      padding: 20px; border: 2px solid #aaa; background: #fff; color:black;
      display: none; z-index: 10; text-align:center;
    }
    #close-paywall { margin-left:10px; }
  </style>
</head>
<body>

<div id="carousel"></div>

<div id="paywall">
  <h3>Unlock All Episodes</h3>
  <p>Purchase the full season to access all locked episodes.</p>
  <a href="YOUR_PAYPAL_LINK_HERE" target="_blank">
    <button>Unlock Now</button>
  </a>
  <button id="close-paywall">Close</button>
</div>

<script>
// Episode data: replace with your YouTube IDs and ads
const episodes = [
  { yt: "EPISODE_VIDEO_ID_1", ad: "AD_VIDEO_ID_1", free: true },
  { yt: "EPISODE_VIDEO_ID_2", ad: "AD_VIDEO_ID_2", free: true },
  { yt: "EPISODE_VIDEO_ID_3", ad: "AD_VIDEO_ID_3", free: true },
  { yt: "EPISODE_VIDEO_ID_4", ad: "AD_VIDEO_ID_4", free: false },
  { yt: "EPISODE_VIDEO_ID_5", ad: "AD_VIDEO_ID_5", free: false },
  // add more episodes
];

const carousel = document.getElementById("carousel");
const paywall = document.getElementById("paywall");
const closePay = document.getElementById("close-paywall");

// Track unlocked episodes in localStorage
let unlocked = JSON.parse(localStorage.getItem("unlocked")) || false;

function renderCarousel() {
  carousel.innerHTML = "";
  episodes.forEach((ep,i) => {
    const container = document.createElement("div");
    container.className = "episode-container";

    if(!ep.free && !unlocked){
      container.classList.add("locked");
      container.innerText = "Locked – Tap to Unlock";
      container.onclick = () => { paywall.style.display = "block"; };
    } else {
      // iframe for YouTube
      const iframe = document.createElement("iframe");
      iframe.src = `https://www.youtube.com/embed/${ep.ad}?rel=0`;
      container.appendChild(iframe);

      // overlay for pre-roll ad
      const overlay = document.createElement("div");
      overlay.id = "overlay"+i;
      overlay.innerText = "▶ TAP/PRESS PLAY";
      container.appendChild(overlay);

      overlay.onclick = () => {
        overlay.style.display = "none";

        // after ad duration (~10s), switch to episode
        setTimeout(() => {
          iframe.src = `https://www.youtube.com/embed/${ep.yt}?autoplay=1&rel=0`;
          setupNextEpisode(i);
        }, 10000);
      };
    }

    carousel.appendChild(container);
  });
}

// Auto-scroll to next episode after fixed duration (simplified)
function setupNextEpisode(index){
  // Assume episode ~60s duration
  setTimeout(()=>{
    const nextIndex = index + 1;
    if(nextIndex < episodes.length){
      const nextEp = episodes[nextIndex];
      if(!nextEp.free && !unlocked){
        paywall.style.display = "block";
        return;
      }
      carousel.children[nextIndex].scrollIntoView({behavior:'smooth'});
      const nextOverlay = carousel.children[nextIndex].querySelector(`[id=overlay${nextIndex}]`);
      if(nextOverlay) nextOverlay.click();
    }
  }, 60000); // adjust based on real episode length
}

closePay.onclick = ()=>{ paywall.style.display="none"; };

// Initialize
renderCarousel();
</script>

</body>
</html>
